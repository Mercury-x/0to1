# 跨域的策略

## 浏览器的同源策略

虽然请求可以发送出去，但是浏览器不会让js拿到内容

`两个url必须同源才能允许交互`

### 什么是域？

`http://www.bilibili.com:8080`
域包含：
- 协议: http://
- 主机: www.bilibili.com
- 端口号: :8080

## JSONP

`JSON with padding`

原理：当时在设计`script标签`时就允许在别的源请求脚本。html的script标签的默认type就是`text/javascript`，请求的内容会被浏览器执行。

`前端定义函数，由后端传入函数并执行，在执行时，同时将数据作为参数传过来`

缺点：只支持Get方法不支持Post方法

## CORS

当浏览器在进行跨域请求时，会在请求里添加`头部Origin`

`origin: 协议+主机+端口`

如果服务器允许吗某一个头部访问，就得添加`Access-Control-Allow-Origin: 协议+主机+端口`

当用户想要修改服务器数据时，即发送`patch delete put`等方法时，浏览器会先发送一个预检请求`OPTION`，查看服务器是否支持当前跨域请求，直到允许之后，才会去发送具体请求。

缺点：有兼容问题

## 服务器代理

- 前端页面请求反向代理
- 反向代理再将请求转发给服务器

反向代理与服务器之间属于服务器之间的沟通，不存在同源策略。