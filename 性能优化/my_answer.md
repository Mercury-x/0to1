# 讲一讲性能优化？

首先的话，可以先用开发者工具的lighthouse分析一下网页的表现。看一下lighthouse给出的一些指标，像First Contentful Paint，看一看白屏的时间，或者time to interactive，首次可以进行交互的时间。
然后可以看一下lighthouse给出的一些建议，再有针对性地进行优化。

## 渲染优化

然后网页运行的时候，可以用performance工具去看一下有没有一些高频的处理函数，可以去看一下能不能去进行一个防抖的操作，还有就是看一下没有一些可能会导致回流（修改页面导致重新进行布局）的操作，尽量去避免回流操作（读写分离）。可以考虑用requestAnimationFrame在每一帧渲染之前去做（rAF是在layout之前做的）。

## 代码优化

代码优化主要就是代码拆解，然后按需加载，还有就是删除一些dead code。编写代码的时候可以根据v8的一些编译规则去编写，比如说对于函数，v8会先进行lazy parsing懒解析，等到真正用到的时候再去解析，我们可以对一些马上要用到的代码进行eager parsing饥饿解析。然后还有很多其他的优化规则这个可以在v8的博客上看到，还有就是类数组尽量转化为数组，类数组方法借用的时间耗时比转化为真数组后再进行时间要更长。然后html的优化的话，一个是要减少ifram的使用（iframe会去阻塞页面加载），还有就是压缩空白字符和删除注释。

## 资源优化

主要是减少http请求的次数和压缩请求资源的大小，对于图片可以进行一个懒加载的操作

## 资源传输过程中的优化

可以使用gzip进行压缩，如果是使用http1.1的话可以开启keepalive,保持连接不中断，这样可以节省每次都需要重新建立连接所耗费的时间。另一个就是可以使用http缓存